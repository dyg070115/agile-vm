/*
 *	Agile VM 移动前端MVVM框架
 *	Version	:	1.0.1487683976122 beta
 *	Author	:	nandy007
 *	License MIT @ https://github.com/nandy007/agile-vm
 */var module$this = module;!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,exports,e){e(1)},function(t,exports,e){!function(){var n=e(2),i=e(3),r=e(4),a=e(5),o=function(t,e){if(h.ui.isJQS(t))return t;if(h.isFunction(t))return $(r).on("ready",t);var n=t?t instanceof Array?t:"string"==typeof t?0===t.indexOf("<")?h.parseHTML(t):h.parseSelector(t,e):[t]:[],i=this;this.domList=n,h.util.defObj(this,"length",function(){return n.length},function(){p.log("不能修改length值")}),h.each(n,function(t,e){!function(t){h.util.defObj(i,t,function(){return n[t]},function(){p.log("不能修改元素内容")})}(t)})};o.prototype={add:function(t){$el=t instanceof o?t:new o(t);var e=this.domList;return $el.each(function(){e.push(this)}),new o(e)},get:function(t){var e=this.domList.length;return new o(t<0||t>=e?[]:this.domList[t])},childs:function(t){return this.children.apply(this,arguments)},textContent:function(){return this.text.apply(this,arguments)},attrs:function(){return this.attr.apply(this,arguments)},isElement:function(){return this.length>0&&"#text"!==this.elementType()},elementType:function(){var t=this.domList[0]||{},e=t.getTag(),n=e;return n},each:function(t){this.domList;return h.each(this.domList,function(e,n){return t.call(n,e)}),this},children:function(t){var e=[];return this.each(function(){var n=this,i=n?h.ui.isText(n.getTag())?[h.ui.createTextNode(n)]:n.getChildren():[];e=h.util.isNumber(t)?e.concat(0===i.length?[]:[i[t]]):h.util.isString(t)?e.concat(h.parseSelector(t,n,"children")):e.concat(i)}),new o(e)},parent:function(){var t=[];return this.each(function(){var e=this;(e=e.getParent&&e.getParent())&&t.push(e)}),new o(t)},find:function(t){var e=[];return this.each(function(){e=e.concat(h.parseSelector(t,this))}),new o(e)},first:function(){return new o(this.domList[0]||[])},last:function(){return new o(this.domList[this.domList.length-1]||[])},html:function(){var t=arguments[0],e=this.domList[0];return 0===arguments.length?e&&e.getInnerHTML():(this.each(function(){this.clear(),this.appendChild(i.createElementByXml(t))}),this)},text:function(){var t=arguments[0],e=this.domList[0];return 0===arguments.length?e&&e.getText():(this.each(function(){this.setText(t)}),this)},val:function(){var t=h.util.copyArray(arguments);return t.unshift("value"),this.attr.apply(this,t)},is:function(t){var e=t.split(":"),n=e[0],i=e[1]||"";if(n&&this.elementType()!==n.toLowerCase())return!1;if(!i)return!0;switch(i){case"checked":case"selected":default:return this.attr(i)===!0}},css:function(){var t=arguments[0],e=arguments[1],n=this.domList[0];return 1===arguments.length&&"string"==typeof t?n&&n.getStyle(t):2===arguments.length?(this.each(function(){this.setStyle(t,e)}),this):h.isPlainObject(t)?(this.each(function(){h.each(t,function(t,e){this.setStyle(t,e)},this)}),this):void 0},attr:function(){var t=arguments[0],e=arguments[1],n=this.domList[0];if(0===arguments.length)return n&&function(){var t=[];return h.each(n.getAttrs(),function(e,n){"checked"!==e&&"selected"!==e||(n="true"===n),t.push({name:e,value:n})}),t}();if(arguments.length>1)return this.each(function(){"class"===t?this.setClassStyle(e):"adapter"===t?this.setAdapter(e instanceof o?e[0]:e):"checked"===t||"selected"===t?this.setAttr(t,e===!0||"true"===e?"true":"false"):"isFocus"===t?e?this.setFocus():r.hideSip():"function"==typeof this[t]?this[t](e):this.setAttr(t,e)}),this;if(!n)return"";var i;try{if("class"===t)i=n.getClassStyle();else if("id"===t)i=n.getId();else if("adapter"===t){var s=n.getAdapter();s||(s=new a,n.setAdapter(s)),i=new A(s)}else i="checked"===t||"selected"===t?"true"===n.getAttr(t):"function"==typeof n[t]?n[t]():n.getAttr(t)}catch(t){$.util.error(t)}return i||""},prop:function(){this.attr.apply(this,arguments)},removeAttr:function(t){return this.each(function(){this.removeAttr(t)}),this},hasAttr:function(t){return this.length>0&&this.domList[0].hasAttr(t)},hasClass:function(t){var e=this.length>0&&this.domList[0].getClassStyle()||"";return(" "+e+" ").indexOf(" "+t+" ")>-1},addClass:function(t){return this.each(function(){var e=(this.getClassStyle()||"").trim();e||this.setClassStyle(t);var n=[],e=" "+e+" ";h.util.each((t||"").split(" "),function(t,i){e.indexOf(" "+i+" ")<0&&n.push(i)}),n.length>0&&this.setClassStyle(e.trim()+" "+n.join(" "))}),this},removeClass:function(t){return this.each(function(){var e=(this.getClassStyle()||"").trim();e&&(e=" "+e+" ",h.util.each((t||"").split(" "),function(t,n){n=" "+n+" ",e.indexOf(n)>-1&&(e=e.split(n).join(" "))}),this.setClassStyle(e))}),this},data:function(t,e,n){if(t="data-"+t,arguments.length>1)return this.each(function(){(n!==!0||h.isEmptyObject(this[t]))&&h.util.defRec(this,t,h.isPlainObject(e)?JSON.stringify(e):String(e))}),this;var i=(this.isElement()?this.domList[0][t]:"")||"";try{return JSON.parse(i)}catch(t){return i}},before:function(t){return this.each(function(){this.getParent().insertBefore(t[0],this)}),this},after:function(t){return this.each(function(){var e=this.getParent();e.getLastChild()===this?e.appendChild(t[0]):e.insertBefore(t[0],this.getNext())}),this},next:function(t){var e=[];return this.each(function(){var n=t?h.parseSelector(t,[this],"next")[0]:this.getNext();n&&e.push(n)}),new o(e)},prev:function(t){var e=[];return this.each(function(){var n=t?h.parseSelector(t,[this],"prev")[0]:this.getPrevious();n&&e.push(n)}),new o(e)},siblings:function(t){var e=[];return this.each(function(){e=e.concat(t?h.parseSelector(t,this.getParent(),"children"):m(this))}),new o(e)},empty:function(){return this.each(function(){this.clear()}),this},remove:function(){var t=h.util.copyArray(arguments);return 0===t.length?this.each(function(){return this.remove(),null}):this.each(function(){h.each(t,function(t,e){e.remove()},this)}),this},append:function(t){var e=t instanceof o?t:[t],n=this.domList[0];return n?(h.each(e,function(t,e){n.appendChild(e)}),this):this},replaceWith:function(t){return t=new o(t),this.each(function(e){var n=this.parentNode,i=this;t.each(function(t){0===e&&(this.domList[t]=this),n.insertBefore(this,i)}),i.remove()}),new o(this.domList)},appendTo:function(t){var e=new o(t);return this.each(function(){var t=this;e.each(function(){this.appendChild(t)})}),this},insertAfter:function(t){var e=new o(t);return this.each(function(){var t=this;e.each(function(){var e=this.getNext(),n=this.getParent();e?n.insertBefore(t,e):n.appendChild(t)})}),this},insertBefore:function(t){var e=new o(t);return this.each(function(){var t=this;e.each(function(){var e=this;this.getParent().insertBefore(t,e)})}),this},replaceTo:function(t){var e=new o(t),n=this;return e.each(function(){var t=this,e=this.getParent();n.each(function(){e.insertBefore(this,t)}),t.remove()}),this},clone:function(t){return new o(this.length>0&&this.domList[0].clone(t)||[])},on:function(t,e,n){t=c.get(t),"function"==typeof e&&(n=e,e=null);var i=function(t,e,n){var r=t.getParent();return t===e?e:r===n?null:i(r,e,n)};return this.each(function(){this.on(t,e?function(t){var r=this,a=t.target;h.each(h.parseSelector(e,r),function(t,e){var o=i(a,e,r);o&&n.apply(o,arguments)})}:n)}),this},trigger:function(){var t=arguments;return t[0]=c.get(t[0]),this.each(function(){this.fire.apply(this,t)}),this},off:function(t,e){return t=c.get(t),this.each(function(){this.off.call(this,t,e)}),this},exe:function(t,e){var n;return this.each(function(){var i=this;i&&"function"==typeof i[t]&&(n=i[t].apply(i,e))}),n},ready:function(t){r.on(c.ready,t)},render:function(t){return h.vm(this,t),this},show:function(t){t=u.formateShowHide(t),this.each(function(){this.show(t)})},hide:function(t){t=u.formateShowHide(t),this.each(function(){this.hide(t)})},animate:function(t,e,n,r){"function"==typeof n?(r=n,n="linear"):"function"==typeof e?(r=e,e=1e3,n="linear"):arguments.length<2&&(r=null,n="linear",e=1e3);var a=[];h.isArray(t)?a=t:h.isPlainObject(t)&&a.push({duration:e,curve:n,props:t}),this.each(function(){s++;var t=this;this.startAnimator({animators:a},function(e){s--,r&&r.apply(t,arguments),t.releaseAnimator(),0===s&&i.refresh()})})}};var s=0,u={get:function(t){return u[t]||t},formateShowHide:function(t){return"object"==typeof t?function(){return t.type=u.get(t.type),t}():{type:t}},slideRight:"slide_l2r",slideLeft:"slide_r2l",slideUp:"slide_b2t",slideDown:"slide_t2b"},c={get:function(t){return c[t]||t},dbclick:"doubleClick",ready:"loaded",touchstart:"touchDown",touchmove:"touchMove",touchend:"touchUp",mousedown:"touchDown",mousemove:"touchMove",mouseup:"touchUp",scroll:"scrollChange",input:"textChanged"},h=function(t,e){return new o(t,e)},l=Object.prototype.toString,f=Object.prototype.hasOwnProperty,p=e(6),d=["error","warn","log"],v=function(t,e){d.indexOf(h.util.consoleLevel)<d.indexOf(t)||p&&p[t].apply(p,e)};p.setFilePath("res:page/log.txt"),h.each=function(t,e,n){if(t){var i;if(this.isArray(t)||!this.util.isString(t)&&this.util.isNotNaNNumber(t.length))for(var r=0;r<t.length&&(i=e.call(n,r,t[r]),i!==!1);r++)null===i&&(t.splice(r,1),r--);else if(this.util.isObject(t))for(var a in t){if(i=e.call(n,a,t[a]),i===!1)break;null===i&&delete t[a]}}};var g=function(t,e,n){var i=[];return h.util.each(e,function(e,r){var a=h.util.copyArray(t);if("all"===n){var o=a.shift();i=i.concat(x(("attr"===o.type&&"undefined"==typeof o.attrValue?y(r,o,!0):r.getElements(o.exep))||[],a))}else if("children"===n)i=i.concat(x(r.getChildren()||[],a));else if("siblings"===n)i=i.concat(x(m(r),a));else if("prev"===n){for(var s=[];(r=r&&r.getPrevious())&&0===(s=x([r],a)).length;);i=i.concat(s)}else if("next"===n){for(var s=[];(r=r&&r.getNext())&&0===(s=x([r],a)).length;);i=i.concat(s)}}),i},m=function(t){for(var e=t,n=t,i=[];(e=e&&e.getNext())||(n=n&&n.getPrevious());)i.push(e||n);return i},y=function(t,e,n){var i=[];return h.util.each(t.getChildren?t.getChildren():[],function(t,r){r.hasAttr&&r.hasAttr(e.attrName)&&i.push(r),n&&(i=i.concat(y(r,e,n)))}),i},x=function(t,e){if(0===e.length)return t;var n=[];return h.util.each(t,function(t,i){var r=!0;h.util.each(e,function(t,e){if("id"===e.type&&i.getId()!==e.id||"class"===e.type&&(" "+i.getClassStyle()+" ").indexOf(" "+e.className+" ")<0||"attr"===e.type&&("undefined"==typeof e.attrValue?!i.hasAttr(e.attrName):i.getAttr(e.attrName)!==e.attrValue)||"tag"===e.type&&i.getTag()!==e.tagName)return r=!1}),r&&n.push(i)}),n};h.parseSelector=function(t,e,n){t=t.replace(/['"]/g,"").replace(/[ ]*([\=\:,>~])[ ]*/g,"$1").replace(/([\[\.])[ ]*/g,"$1").replace(/[ ]*\]/g,"]").replace(/[ ]+/g," ");var r=t.split(","),a=h(e||i),e=[];a.each(function(){e.push(this)});var o=[];return h.util.each(r,function(t,i){i=h.util.trim(i);var r='return ["'+i.replace(/([ >~])/g,'","$1","')+'"];',a=e,s=n||"all",u=new Function(r)();h.util.each(u,function(t,e){if(" "===e)s="all";else if(">"===e)s="children";else if("~"===e)s="siblings";else{var n=[];if(e.replace(/\#([\w\-]+)/,function(t,e){return n.push({type:"id",exep:t,id:e}),""}).replace(/\.([\w\-]+)/g,function(t,e){return n.push({type:"class",exep:t,className:e}),""}).replace(/\[([^\]]+)\]/g,function(t,e){var i=e.split("="),r=i[0],a=i[1]||"";return n.push(i.length<2?{type:"attr",exep:t,attrName:r}:{type:"attr",exep:t,attrName:r,attrValue:a}),""}).replace(/[\w\-]+/,function(t){return n.push({type:"tag",exep:t,tagName:t}),""}),0===n.length)return;a=g(n,a,s)}}),o=h.util.mergeArray(o,a)}),o},h.parseHTML=function(t){/<[^>]+>/g.test(t)||(t="<text>"+t+"</text>");var e=i.createElementByXml("<box>"+t+"</box>");return new o(e).children()},h.type=function(t){var e={};return h.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,n){e["[object "+n+"]"]=n.toLowerCase()}),null==t?String(t):e[l.call(t)]||"object"},h.isArray=Array.isArray||function(t){return"array"===this.type(t)},h.isFunction=function(t){return t instanceof Function},h.isEmptyObject=function(t){return!t||0===Object.keys(t).length},h.isPlainObject=function(t){if(!t||"object"!==this.type(t))return!1;if(t.constructor&&!f.call(t,"constructor")&&!f.call(t.constructor.prototype,"isPrototypeOf"))return!1;var e;for(e in t);return void 0===e||f.call(t,e)},h.extend=function(){var t,e,n,i,r,a,o=arguments,s=this,u=arguments[0]||{},c=1,l=arguments.length,f=!1;for(h.util.isBoolean(u)&&(f=u,u=arguments[c]||{},c++),"object"==typeof u||this.isFunction(u)||(u={}),c===l&&(u=this,c--);c<l;c++)if(null!=(t=o[c]))for(e in t)n=u[e],i=t[e],u!==i&&(f&&i&&(this.isPlainObject(i)||(r=this.isArray(i)))?(r?(r=!1,a=n&&this.isArray(n)?n:[]):a=n&&this.isPlainObject(n)?n:{},u[e]=s.extend(f,a,i)):void 0!==i&&(u[e]=i));return u},h.util={consoleLevel:"warn",each:function(t,e,n){if(t){var i;if(h.isArray(t)||!h.util.isString(t)&&h.util.isNotNaNNumber(t.length))for(var r=0;r<t.length&&(i=e.call(n,r,t[r]),i!==!1);r++)null===i&&(t.splice(r,1),r--);else if(h.util.isObject(t))for(var a in t){if(i=e.call(n,a,t[a]),i===!1)break;null===i&&delete t[a]}}},isString:function(t){return"string"===h.type(t)},isBoolean:function(t){return"boolean"===h.type(t)},isNumber:function(t){return"number"===h.type(t)},isNotNaNNumber:function(t){return!isNaN(t)&&this.isNumber(t)},isObject:function(t){return"object"===h.type(t)},isEvent:function(t){return"obejct"==typeof t&&t.type&&t.target&&t.timestamp},clearObject:function(t){h.util.each(t,function(){return null})},trim:function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},removeSpace:function(t){return t.replace(/\s/g,"")},hasOwn:function(t,e){return t&&f.call(t,e)},copy:function(t){var e;return h.isArray(t)?e=t.slice(0):this.isObject(t)&&(e=h.extend(!0,{},t)),e||t},defObj:function(t,e,n,i){var r={};n&&(r.get=function(){return n.apply(this)}),i&&(r.set=function(){i.apply(this,arguments)}),Object.defineProperty(t,String(e),r)},defRec:function(t,e,n){return Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!1,configurable:!0})},copyArray:function(t){return Array.prototype.slice.call(t||[],0)},mergeArray:function(t,e){return h.util.each(t,function(t,n){h.util.each(e,function(t,e){if(e===n)return null})}),t.concat(e)},log:function(){v("log",arguments)},warn:function(){v("warn",arguments)},error:function(){v("error",arguments)},paramTransForm:function(t){if(this.isObject(t)){var e=[];return this.each(t,function(t,n){e.push(t+"="+n)}),e.join("&")}for(var n,i=/([^&=]+)=([\w\W]*?)(&|$|#)/g,e={};null!=(n=i.exec(t));)e[n[1]]=n[2];return e},sync:function(){var t=h.util.copyArray(arguments),e=t.pop(),n=t.length,i=[];h.util.each(t,function(t,r){!function(t,r){r(function(r){i[t]=r,n--,0===n&&e.apply(e,i)})}(t,r)})}};var w=0,b=function(){o.apply(this,0==arguments.length?h.parseHTML('<box id="f_'+w++ +'"></box>'):arguments)},S=b.prototype=Object.create(o.prototype);S.appendTo=function(t){var e=new o(t);return this.children().each(function(){var t=this;e.each(function(){this.appendChild(t)})}),this},S.insertAfter=function(t){var e=new o(t);return this.children().each(function(){var t=this;e.each(function(){var e=this.getNext(),n=this.getParent();e?n.insertBefore(t,e):n.appendChild(t)})}),this},S.insertBefore=function(t){var e=new o(t);return this.children().each(function(){var t=this;e.each(function(){var e=this;this.getParent().insertBefore(t,e)})}),this},S.replaceTo=function(t){var e,n=new o(t),i=this;return n.each(function(){var t=this;e=this.getParent(),i.children().each(function(){e.insertBefore(this,t)}),t.remove()}),this};var A=function(){o.apply(this,0==arguments.length?new a:arguments),this._listElement=null,this._cells={}},P=A.prototype=Object.create(o.prototype);P.on=function(t,e){var n=this.domList[0];return n&&n.on(t,e),this},P.refresh=function(){var t=this.domList[0];return t&&t.refresh(),this},P.setCell=function(t){var e=t.parent(),n=(t.parent().data("AdapteCell")||e.children("cell").length)-1;return e.data("AdapteCell",n),0===n},P.initEvent=function(t,e,n,i){var r={},a=t.hasAttr("use-section");h.each(t.children("cell"),function(t,e){var n=h(e).clone(!0);r[n.attr("id")]=n});var o,s="type",u="title",c=function(t){return o=n(),(a?o[t].cells:o)||[]};this.off("getCellId").on("getCellId",function(t,e,n){return c(n)[e][s]}),this.off("getView").on("getView",function(t,e,n){var u=r[c(n)[e][s]];h.ui.copyElement(t.target,u,!0);var l=h(t.target);i.apply(null,[l,e,a?o[n].cells:o])}),this.off("getCount").on("getCount",function(t,e){return c(e).length}),this.off("getItem").on("getItem",function(t,e,n){return c(n)[e]}),this.off("getSectionCount").on("getSectionCount",function(t){return a?o.length:1}),this.off("getSectionText").on("getSectionText",function(t,e){return a?o[e][u]:null})},h.ui={isJQS:function(t){return this.isJQLite(t)||this.isJQFragment(t)||this.isJQAdapter(t)},isJQLite:function(t){return t instanceof o},isJQFragment:function(t){return t instanceof b},isJQAdapter:function(t){return t instanceof A},isText:function(t){return"text"===t||"iconfont"===t},useAdapter:function(t){var e=t.parent()[0];return e&&"function"==typeof e.setAdapter},createTextNode:function(t){return{getTag:function(){return"#text"},getChildren:function(){return[]},getParent:function(){return t},setText:function(e){t.setText(e)},getText:function(){return t.getText()}}},createJQAdapter:function(t){return t?new A(t):new A},createJQFragment:function(){return new b},toJQFragment:function(t){var e=this.createJQFragment();if(t instanceof o)t.children().each(function(){return e.append(this),null});else if("object"==typeof t)h.each(h.util.copyArray(t.getChildren()),function(t,n){return e.append(n),null});else{/<[^>]+>/g.test(t)||(t="<text>"+t+"</text>");var n=i.createElementByXml("<box>"+t+"</box>");h.util.each(h.util.copyArray(n.getChildren()),function(t,n){return e.append(n),null})}return e},clear:function(t){h.each(t.getAttrs(),function(e,n){return"id"!==e&&t.removeAttr(e),null})},copyElement:function(t,e){this.clear(t);for(var n=0;n<e.length;n++){h.each(e[n].getAttrs(),function(e,n){t.setAttr(e,n)});var i=t.getChildren();h.each(e[n].getChildren(),function(t,e){h.ui.copyElement(i[t],new o(e))}),e[n].getText&&t.setText(e[n].getText())}},closeWindow:function(t){r.close(t)},openWindow:function(t,e){var n=t.url,i="";e&&(i=h.template(n,e),t.content=i),t.content&&delete t.url,r[t.content?"openData":"open"](t)},refreshDom:function(){0===arguments.length&&i.refresh(),h.util.each(arguments,function(t,e){h(e).each(function(){if(!e)return void i.refresh();var t=this.getTag&&this.getTag(),n=this.getParent&&this.getParent(),r=n&&n.getTag();"list"===t?this.getAdapter().refresh():"header"===t&&n&&"list"===r?n.refreshHeader():"footer"===t&&n&&"list"===r?n.refreshFooter():this.refresh()})})},toast:function(t,e){n.toast({content:t,duration:e})}};var C=function(t){var e={url:{dft:""},data:{dft:""},method:{ref:"type",dft:"get"},connectTimeout:{ref:"timeout",dft:15e3},requestHeader:{ref:"headers",dft:{}}},n={};h.each(e,function(i,r){var a=e[i];n[i]=a.ref?t[a.ref]:t[i]||a.dft});var i=function(e){var i=e.status,r=e.data;i>199&&i<300?function(){if("json"===t.dataType)try{r=JSON.parse(r)}catch(t){r=null,h.util.warn("请求地址："+n.url),h.util.warn("数据格式不正确："+t)}t.success&&t.success(r)}():function(){t.error&&t.error(i)}(),t.complete&&t.complete(r)},r=function(e,n){var i=e.length,r=e.totalLength,a=r?i/(2*r):0;a=String(Math.floor(100*a)+(n?50:0))+"%",t.uploadProgress({type:"requestProgress"},i,r,a)},a=function(t){r(t,!0)};return{option:n,callFunction:i,requestProgressFunction:r,responseProgressFunction:a}},k=e(7),L=function(t,e){var n={url:"",type:"get",dataType:"text",data:"",headers:{},timeout:45e3,success:function(){},error:function(){},complete:function(){},uploadProgress:function(){}};h.extend(n,t);var i=C(n);h.util.error(i.option),k[e](i.option,i.callFunction,i.requestProgressFunction,i.responseProgressFunction)};h.ajax=function(t){L(t,"ajax")},h.ajaxForm=function(t){L(t,"formSubmit")},h.get=function(t,e){L({url:t,dataType:"json",complete:e},"ajax")},h.fn={extend:function(t){h.each(t,function(t,e){o.prototype[t]=e})}},h.file={f:e(8),read:function(t){return this.f.readTextFile(t)},write:function(t,e){return this.f.writeTextFile({path:t},e)}},h.JSON={parse:function(t){return JSON.parse(t)||{}},stringify:function(){return JSON.stringify(str)||""}},h.vm=function(t,n){var i=e(9);return new i(t,n)},t.exports=h,"undefined"!=typeof module$this&&(module$this.exports=h);var T=e(15);T.hooks("get",function(t){return h.file.read(t)}),h.template=T}()},function(t,exports){t.exports=require("UI")},function(t,exports){t.exports=require("Document")},function(t,exports){t.exports=require("Window")},function(t,exports){t.exports=require("ListAdapter")},function(t,exports){t.exports=require("Console")},function(t,exports){t.exports=require("Http")},function(t,exports){t.exports=require("File")},function(t,exports,e){!function(){function n(t,e){this.backup=$.util.copy(e),this.vm=new i(t,e),this.$data=this.vm.$data}var $=e(1),i=e(10),r=n.prototype;r.reset=function(t){var e=this.$data;$.util.isString(t)?e[t]=backup[t]:$.isArray(t)?$.util.each(t,function(t,n){e[n]=backup[n]}):$.util.each(e,function(t,n){e[t]=backup[t]})},r.destroy=function(){this.vm=this.backup=this.$data=null},t.exports=n}()},function(t,exports,e){!function(){var $=e(1),n=e(11),i=/\{\{([^\}]*)\}\}/,r={isDirective:function(t){return 0===t.indexOf("v-")},getDirName:function(t){return t.split(":")[0].replace("-","")},isInPre:function(t){return t.isElement()&&(t.hasAttr("v-if")||t.hasAttr("v-for")||t.hasAttr("v-pre"))},hasDirective:function(t){var e,n=!1;return t.isElement()&&(e=t.attrs()).length>0?$.util.each(e,function(t,e){if(r.isDirective(e.name))return n=!0,!1}):"#text"===t.elementType()&&i.test(t.text())&&(n=!0),n},isVforDirective:function(t){return"v-for"===t}},a=function(t,e){var i=$(t);return i.isElement()&&0!==i.length?$.util.isObject(e)?(this.$element=i,this.$fragment=$.ui.toJQFragment(i),this.$data=e,$.util.defRec(e,"$alias",{}),this.parser=new n(this),void this.init()):$.util.warn("第二个参数model必须是一个JSON对象: ",e):$.util.warn("第一个参数element必须是一个原生DOM对象或者一个JQLite对象: ",t)},o=a.prototype;o.init=function(){this.compileSteps(this.$fragment),this.$fragment.appendTo(this.$element)},o.compileSteps=function(t,e){var n=[];this.walkElement(t,e,n),this.compileDirectives(n)},o.walkElement=function(t,e,n){var i=this;t.each(function(){var t=$(this);r.hasDirective(t)&&n.push({el:t,fors:e}),r.isInPre(t)||i.walkElement(t.childs(),e,n)})},o.compileDirectives=function(t){$.util.each(t,function(t,e){this.compileDirective(e)},this)},o.compileDirective=function(t){var e=t.el,n=t.fors;if(e.isElement()){var i=e.attrs();$.util.each(i,function(t,e){var n=e.name;return r.isDirective(n)?r.isVforDirective(n)?(i=[e],!1):void 0:null}),$.util.each(i,function(t,i){this.compile(e,i,n)},this)}else"#text"===e.elementType()&&this.compileText(e,n)},o.compile=function(t,e,n){var i=e.name,a=e.value,o=[t,n,a,i];t.removeAttr(i);var s=this.parser[r.getDirName(i)];s?s.apply(s,o):$.util.warn("指令 ["+i+"] 未添加规则!")},o.compileText=function(t,e){var n=t.text().trim().replace(/\n/g,"").replace(/\"/g,'\\"');n=('"'+n.replace(new RegExp(i.source,"g"),function(t,e){return'"+('+e+')+"'})+'"').replace(/(\+"")|(""\+)/g,"");var r=this.parser.vtext;r.call(r,t,e,n,"v-text")},t.exports=a}()},function(t,exports,e){!function(){var $=e(1),n=e(12),i=e(13),r={vtext:function(t,e,n,i,r){var o=this.updater,s=this.$scope,u=[],c=n.split("+");$.util.each(c,function(t,n){n=n.trim(),a.isConst(n)||(u.push(a.makePath(n,e)),c[t]=a.makeAliasPath(n,e))});var h=new Function("scope","try{ return "+c.join("+")+'; }catch(e){return "";}'),l=h(s);r=r||"updateTextContent",o[r](t,l),this.watcher.watch(u,function(e){l=h(s),o[r](t,l)},e)},vhtml:function(t,e,n,i){var r=$.util.copyArray(arguments);r.push("updateHTMLContent"),this.vtext.apply(this,r)},vfor:function(t,e,n){var i=this,r=this.vforIndex++,o=(this.vm,this.$scope),s=t.parent();n=n.replace(/[ ]+/g," ");var u=n.split(" in "),c=u[0],h=u[1],l=a.makePath(h,e),f=(a.getListScope(o,l),{}),p=i.preCompileVFor(t,function(){return a.getListScope(o,l)},0,e,c,h,f,r),d=$.ui.isJQAdapter(p);if(!d){p.replaceTo(t);var v=[l],g=this.updater;this.watcher.watch(v,function(n,o){n.method||(n={path:n.path,method:"xReset",args:n.newVal,newArray:n.newVal}),n.vforIndex=r;var u=0===o;i.watcher.updateIndex(l,n,function(t){var e=f[t.newVal]=f[t.oldVal];e.$index=t.newVal,i.watcher.change(t)},u),g.updateList(s,n,function(o){var s=a.getBaseIndex(n),u=i.preCompileVFor(t,function(){return o},s,e,c,h,f,r);return u})})}},von:function(t,e,n,i,r){var o=this,s=(this.vm,this.$scope),u=a.parseDir(i,n);$.util.each(u,function(i,u){var c=(a.makePath(n,e),a.makeAliasPath(n,e)),h="";c=c.replace(/\((.*)\)/,function(t,e){return h=e,""});var l=function(){var t=$.util.copyArray(arguments);if(o.setDeepScope(e),""===h){var n=new Function("scope","node","params","return "+c+".apply(node, params);");n(s,this,t)}else{var n=new Function("scope","node","$event","return "+c+".call(node, "+h+");");n(s,this,t.shift())}};t.each(function(){$.util.defRec(this,"_proxy",l)}),r&&t.off(i,a._proxy),t.on(i,a._proxy)})},vone:function(t,e,n,i){var r=$.util.copyArray(arguments);r.push(!0),this.von.apply(this,r)},vbind:function(t,e,n,i){var r=this,o=this.updater,s=a.parseDir(i,n);$.util.each(s,function(n,i){if(i=$.util.trim(i),"class"===n||"style"===n)return void r["v"+n](t,e,i);o.updateAttribute(t,n,r.getValue(i,e));var s=[];s.push(a.makePath(i,e)),r.watcher.watch(s,function(a){o.updateAttribute(t,n,r.getValue(i,e))},e)})},vstyle:function(t,e,n){var i=this,r=this.updater,o=i.getValue(a.formatExp(n));if($.util.isString(o)){var s=a.formatJData(i.getValue(o,e)),u=a.makePath(o,e);return r.updateStyle(t,s),void i.doWatch(t,u,s,"updateStyle",o,e)}$.util.each(o,function(n,o){r.updateStyle(t,n,i.getValue(o,e));var s=[a.makePath(o,e)];i.watcher.watch(s,function(a){r.updateStyle(t,n,i.getValue(o,e))},e)})},vclass:function(t,e,n){var i=this,r=this.updater,o=i.getValue(a.formatExp(n));if($.util.isString(o)){var s=a.formatJData(i.getValue(o,e)),u=a.makePath(o,e);return r.updateClass(t,s),void i.doWatch(t,u,s,"updateClass",o,e)}$.util.each(o,function(n,o){r.updateClass(t,n,i.getValue(o,e));var s=[a.makePath(o,e)];i.watcher.watch(s,function(a){r.updateClass(t,n,i.getValue(o,e))},e)})},vshow:function(t,e,n){var i=this,r=this.updater,o=t.css("display");r.updateShowHide(t,o,i.getValue(n,e));var s=[a.makePath(n,e)];i.watcher.watch(s,function(a){r.updateShowHide(t,o,i.getValue(n,e))},e)},vif:function(t,e,n){var i=this,r=this.updater,o=function(t){i.vm.compileSteps(t,e)};r.updateMutex(t,i.getValue(n,e),o);var s=[a.makePath(n,e)];i.watcher.watch(s,function(a){r.updateMutex(t,i.getValue(n,e),o)},e)},velse:function(t,e,n){},vlike:function(t,e,n){t.data("__like",n)},vmodel:function(t,e,n){var i=t.data("__like")||t.elementType();switch(i){case"text":case"password":case"textfield":case"textarea":return void this.vmtext.apply(this,arguments);case"radio":return void this.vmradio.apply(this,arguments);case"checkbox":return void this.vmcheckbox.apply(this,arguments);case"select":return void this.vmselect.apply(this,arguments)}this["vm"+i]?this["vm"+i].apply(this,arguments):$.util.warn("v-model 不支持 [ "+i+" ] 组件")},vmtext:function(t,e,n){var i=this,r=this.updater,o=a.makePath(n,e),s=i.getDuplexField(o),u=s.duplex,c=s.field;r.updateTextValue(t,i.getValue(n,e));var h=[o];i.watcher.watch(h,function(){r.updateTextValue(t,i.getValue(n,e))},e),a.bindTextEvent(t,function(){u[c]=t.val()})},vmradio:function(t,e,n){var i=this,r=this.updater,o=a.makePath(n,e),s=i.getDuplexField(o),u=s.duplex,c=s.field,h=i.getValue(n,e),l=t.is(":checked");l&&(u[c]=h=a.formatValue(t,t.val())),r.updateRadioChecked(t,h);var f=[o];i.watcher.watch(f,function(){r.updateRadioChecked(t,i.getValue(n,e))},e),a.bindChangeEvent(t,function(){l!==t.is(":checked")&&(l=t.is(":checked"),u[c]=t.val())})},vmcheckbox:function(t,e,n){var i=this,r=this.updater,o=a.makePath(n,e),s=i.getDuplexField(o),u=s.duplex,c=s.field,h=i.getValue(n,e),l=t.is(":checked");l&&($.util.isBoolean(h)?u[c]=h=!0:$.isArray(h)&&h.push(a.formatValue(t,t.val()))),r.updateCheckboxChecked(t,h);var f=[o];i.watcher.watch(f,function(){r.updateCheckboxChecked(t,i.getValue(n,e))},e),a.bindChangeEvent(t,function(){h=u[c];var t=$(this),e=t.is(":checked");if($.util.isBoolean(h))u[c]=e;else if($.isArray(h)){var n=a.formatValue(t,t.val()),i=h.indexOf(n);e?i===-1&&h.push(n):i>-1&&h.splice(i,1)}})},vmselect:function(t,e,n){var i,r=this,o=this.updater,s=a.makePath(n,e),u=r.getDuplexField(s),c=u.duplex,h=u.field,l=t.hasAttr("multiple"),f=r.getValue(n,e);if($.util.isString(f)){if(l)return $.util.warn("<select> 设置的model ["+h+"] 不是数组不能多选");i=Boolean(f)}else{if(!$.isArray(f))return $.util.warn("<select>对应的 model ["+h+"] 必须是一个字符串或者数组");if(!l)return $.util.warn(" <select> 没有 multiple 属性，model ["+h+"] 不可以设置为数组");i=f.length>0}if(i)o.updateSelectChecked(t,f,l);else{var p=a.getSelecteds(t);c[h]=l?p:p[0]}var d=[s];r.watcher.watch(d,function(){o.updateSelectChecked(t,r.getValue(n,e),l)}),a.bindChangeEvent(t,function(){var t=a.getSelecteds($(this));c[h]=l?t:t[0]})},vmnativeselect:function(t,e,n){var i=this,r=(this.updater,a.makePath(n,e)),o=i.getDuplexField(r),s=o.duplex,u=o.field;s[u]=t.val();var c=[r];i.watcher.watch(c,function(){t.val(i.getValue(n,e))},e),a.bindChangeEvent(t,function(){s[u]=t.val()})}},a=function(t){this.vm=t,this.vforIndex=0,this.$scope=this.getScope(),this.updater=new n(this.vm),this.watcher=new i(this,this.vm.$data),this.init()},o=a.prototype;o.init=function(){var t=this;$.util.each(r,function(e,n){t[e]=function(e,i,r,o){o&&e.data("__directive",a.getDirName(o)),t.setDeepScope(i),n.apply(t,arguments)}})},o.doWatch=function(t,e,n,i,r,o){var s=this,u=this.updater;!function c(h,l){s.watcher.watch(l||h,function(l){var f=a.formatJData(s.getValue(r,o)),p=a.getDiff(f,n);u[i](t,p);var d=a.diffJDeps(h,e,n=f);d.length>0&&c(h,d)},o)}([e].concat(a.getJDeps(e,n)))},o.getDuplexField=function(t){var e=("scope."+t).split("."),n=e.pop(),i=e.join("."),r=this.$scope,a=new Function("scope","return "+i+";");return i=a(r),{duplex:i,field:n}},o.getValue=function(t,e){var n=$.util.copyArray(arguments);return n.unshift(this.$scope),a.getValue.apply(a,n)},o.watchBack=function(t,e,n){this.setDeepScope(t),e.apply(this,n)},o.preCompileVFor=function(t,e,n,i,r,a,o,s){var u=this,c=(this.vm,t.parent());if($.ui.useAdapter(t)){var h=c.attr("adapter");return h.setCell(t)?(h.initEvent(c,t,e,function(t,e,n){u.buildAdapterList(t,n,e,i,r,a,o,s)}),$.ui.refreshDom(h),h):h}return u.buildList(t,e(),n,i,r,a,o,s)},o.buildAdapterList=function(t,e,n,i,r,o,s,u){var c=s[n]=a.createFors(i,r,o,n,!1),h=t.data("vforIndex",u);this.$scope.$alias[r]=e[n],this.vm.compileSteps(h,c)},o.buildList=function(t,e,n,i,r,o,s,u){var c=$.ui.createJQFragment();return $.util.each(e,function(e,h){var l=n+e,f=s[l]=a.createFors(i,r,o,l),p=t.clone(!0).data("vforIndex",u);this.setDeepScope(f),this.vm.compileSteps(p,f),c.append(p)},this),c},o.setDeepScope=function(t,e){if(t){var n=this.$scope,i="$alias",r=t.alias,o=t.access,s=a.makePath(o,t),u=t.$index,c=t.ignor;if(c)return this.setDeepScope(t.fors);var h=new Function("scope","return scope."+s.replace(/\.(\d+)/g,function(t,e){return"["+e+"]"})+"["+u+"];");n[i][r]=h(n),e||(n[i].$index=u),$.util.isNumber(u)&&(e=!0),this.setDeepScope(t.fors,e)}},o.getScope=function(){return Object.create(this.vm.$data)},a.add=function(t,e){var n={};$.util.isObject(t)?n=t:n[t]=e,$.util.each(n,function(t,e){r[t]=e})},a._proxy=function(){var t=this._proxy;t.apply(this,arguments)},a.getDirName=function(t){return t.split(":")[0]},a.isConst=function(t){t=$.util.trim(t),strs=t.split("");var e=strs.shift()||"",n=strs.pop()||"";if(t=("("===e?"":e)+strs.join("")+(")"===n?"":n),this.isBool(t)||this.isNum(t))return!0;var i=/('[^']*'|"[^"]*")/;return i.test(t)},a.isBool=function(t){return"true"===t||"false"===t},a.isNum=function(t){return/^\d+$/.test(t)},a.isJSON=function(t){strs=t.split("");var e=strs.shift(),n=strs.pop();return"{"===e&&"}"===n?strs.join(""):""},a.formatExp=function(t){var e=this.isJSON(t);if(e){var n=e.split(",");return $.util.each(n,function(t,e){var i=e.split(":");i[1]="'"+i[1].replace(/'/g,'"')+"'",n[t]=i.join(":");
}),"{"+n.join(",")+"}"}return"'"+t+"'"},a.makePath=function(t,e){var n=/[^\w\.\[\$]/g;t=t.replace(n,"").replace(/\[/g,".");var i=t.split(".");return $.util.each(i,function(t,n){"$index"===n?i[t]=e.access+"."+e.$index+".*":i[t]=a.findScope(n,e)}),i.join(".")},a.findScope=function(t,e){if(!e)return t;var n=e.alias,i=e.access,r=e.$index;return n===t?i+"."+r:a.findScope(t,e.fors)},a.makeAliasPath=function(t,e){t=t.replace(/([^\w ])[ ]*([\w]+)/g,function(t,n,i){return t=n+i,"."===n||"$event"===t||a.isConst(i)?t:"$index"===t?"scope.$alias."+t:a.hasAlias(i,e)?n+"scope.$alias."+i:n+"scope."+i});var n=t.split(".");return n[0]=n[0].replace(/[\w\$]+/,function(t){return a.isConst(t)||"$event"===t||"scope"===t?t:(("$index"===t||a.hasAlias(t,e))&&(t="$alias."+t),"scope."+t)}),t=n.join(".")},a.hasAlias=function(t,e){return!!e&&(t===e.alias||this.hasAlias(t,e.fors))},a.getListScope=function(t,e){var n=new Function("scope","return scope."+e.replace(/\.(\d+)/g,function(t,e){return"["+e+"]"})+";");return n(t)},a.createFors=function(t,e,n,i,r){return{alias:e,access:n,fors:t,$index:i,ignor:r}},a.getBaseIndex=function(t){var e=t.method;switch(e){case"push":return t.oldLen;case"splice":return t.args[0];default:return 0}},a.getIndex=function(t){var e=-1,n=t.path;return n.replace(/\.(\d+)\.\*/g,function(n,i){e=t.newVal}),e},a.parseDir=function(t,e){var n=t.split(":"),i={};return 1===n.length?i=JSON.stringify(e):2===n.length&&(i[n[1]]=e),i},a.makeFunc=function(t){return new Function("scope","try{ return "+t+'; }catch(e){return "";}')},a.getValue=function(t,e,n){arguments.length>2&&(e=this.makeAliasPath(e,n));var i=this.makeFunc(e);return i(t)},a.formatValue=function(t,e){return t.hasAttr("number")?+e:e},a.getSelecteds=function(t){var e=[],n=t.hasAttr("number");return t.find("option:selected").each(function(){var t=$(this),i=t.val();e.push(n?+i:a.formatValue(t,i))}),e},a.bindTextEvent=function(t,e){var n;t.on("compositionstart",function(){n=!0}),t.on("compositionend",function(){n=!1}),t.on("input",function(){e.apply(this,arguments)}),t.on("blur",function(){e.apply(this,arguments)})},a.bindChangeEvent=function(t,e){t.on("change",function(){e.apply(this,arguments)})},a.getJDeps=function(t,e){var n=[];return $.util.each(e,function(e,i){n.push(t+"."+e)}),n},a.diffJDeps=function(t,e,n){var i={o:[],n:[]};return $.util.each(n,function(n,r){var a=e+"."+n;t.indexOf(a)===-1?(i.n.push(a),t.push(a)):i.o.push(a)}),i},a.formatJData=function(t){if($.util.isString(t)){var e={};return $.util.each(t.split(/[ ;]/),function(t,n){if(n=$.util.trim(n)){var i=n.split(":");i.length>1?e[i[0]]=i[1]:e[n]=!0}}),e}return $.util.copy(t)},a.getDiff=function(t,e){var n={};return $.util.each(t,function(t,i){e[t]!==i&&(n[t]=i)}),$.util.each(e,function(e,i){"undefined"==typeof t[e]&&(n[e]=null)}),n},t.exports=a}()},function(t,exports,e){!function(){function n(t){this.vm=t,this.eventHandler=this.createEventHandler()}var $=e(1),i=n.prototype;i.createEventHandler=function(){return{callbacks:{},index:2016,listeners:{},add:function(t,e,n,i){var r=this.index++;this.callbacks[r]=n,this.listeners[r]=function(){n.apply(i||this,arguments)},t.on(e,this.listeners[r])},remove:function(t,e,n){var i=this;$.util.each(this.callbacks,function(r,a){if(a===n)return t.off(e,i.listeners[r]),delete i.callbacks[r],delete i.listeners[r],!1})}}},i.updateTextContent=function(t,e){t.textContent(String(e))},i.updateHTMLContent=function(t,e){t.empty().append($.parseHTML(String(e)))},i.updateList=function(t,e,n){var i=e.method;switch(i){case"xReset":this.updateListXReset.apply(this,arguments);break;case"pop":this.updateListPop.apply(this,arguments);break;case"push":this.updateListPush.apply(this,arguments);break;case"shift":this.updateListShift.apply(this,arguments);break;case"unshift":this.updateListUnshift.apply(this,arguments);break;case"splice":this.updateListSplice.apply(this,arguments);break;case"xSort":case"sort":case"reverse":this.updateListCommon.apply(this,arguments);break;default:$.util.log("尚未处理"+i+"方法")}};var r=function(t,e){var n,i=t.childs();return i.each(function(){var t=$(this);if(t.data("vforIndex")===e)return n=t,!1}),n},a=function(t,e){for(var n,i=t.childs(),r=i.length,a=r-1;a>-1;a--){var o=$(i[a]);if(o.data("vforIndex")===e){n=o;break}}return n},o=function(t,e){var n=t.childs(),i=(n.length,[]);return t.childs().each(function(){var t=$(this);t.data("vforIndex")===e&&i.push(t)}),i};i.updateListXReset=function(t,e,n){var i=n(e.args),r=o(t,e.vforIndex);0===r.length?i.appendTo(t):(i.replaceTo(r[0]),$.util.each(r,function(e,n){t.remove(n)}))},i.updateListPop=function(t,e,n){var i=a(t,e.vforIndex);i&&i.remove()},i.updateListPush=function(t,e,n){var i=n(e.args),r=a(t,e.vforIndex);r&&r.length>0?i.insertAfter(r):i.appendTo(t)},i.updateListShift=function(t,e,n){var i=r(t,e.vforIndex);i&&i.remove()},i.updateListUnshift=function(t,e,n){var i=n(e.args),a=r(t,e.vforIndex);a&&a.length>0?i.insertBefore(a):i.appendTo(t)},i.updateListSplice=function(t,e,n){for(var i=o(t,e.vforIndex),r=$.util.copyArray(e.args),a=r.shift(),s=r.length>0?a+r.shift():i.length-a+1,u=a;u<s;u++){var c=i[u];if(r.length>0){var h=n(r);c?h.insertBefore(c):h.appendTo(t),r=[]}c&&c.remove()}},i.updateListCommon=function(t,e,n){for(var i=o(t,e.vforIndex),r=e.newArray,a=0,s=i.length;a<s;a++){var u=i[a];if(r.length>0){var c=n(r);u?c.insertBefore(u):c.appendTo(t),r=[]}u&&u.remove()}},i.updateShowHide=function(t,e,n){t.css("display",n?e||"block":"none")},i.updateMutex=function(t,e,n){var i=t.next();u.apply(this,arguments),(i.hasAttr("v-else")||"v-else"===i.data("__directive"))&&u.apply(this,[i,!e,n])};var s="__render",u=function(t,e,n){var i=t.data(s);i||t.data(s,i=t.html()),t.empty();var r=$.ui.toJQFragment(i);e&&(n(r),r.appendTo(t))};i.updateAttribute=function(t,e,n){null===n?t.removeAttr(e):t.attr(e,n)},i.updateClassName=function(t,e,n,i){i?t[e?"addClass":"removeClass"](i):(e&&t.addClass(e),n&&t.removeClass(n))},i.updateClass=function(t,e,n){2===arguments.length?$.util.each(e,function(e,n){this.updateClass(t,e,n)},this):t[n?"addClass":"removeClass"](e)},i.updateStyle=function(t,e,n){2===arguments.length?$.util.each(e,function(e,n){this.updateStyle(t,e,n)},this):t.css(e)!==n&&t.css(e,n)},i.updateTextValue=function(t,e){t.val()!==e&&t.val(e)},i.updateRadioChecked=function(t,e){t.prop("checked",t.val()===($.util.isNotNaNNumber(e)?String(e):e))},i.updateCheckboxChecked=function(t,e){var n=t.val();return $.isArray(e)||$.util.isBoolean(e)?(t.hasAttr("number")&&(n=+n),void t.prop("checked",$.util.isBoolean(e)?e:e.indexOf(n)>-1)):$.util.warn("Checkbox v-model value must be a type of Boolean or Array")},i.updateSelectChecked=function(t,e,n){var i=t.hasAttr("number"),r=t.childs(),a=(r.length,n||t.hasAttr("multiple"));r.each(function(t){var n=$(this),r=n.val();r=i?+r:n.hasAttr("number")?+r:r,n.prop("selected",a?e.indexOf(r)>-1:e===r)})},t.exports=n}()},function(t,exports,e){!function(){function n(t,e){this.parser=t,this.$model=e,this.$depSub={},this.observer=new i(e,this)}var $=e(1),i=e(14),r={iterator:function(t,e){if(!t||0===t.length)return e;var n=t.shift(),i=e[n]=e[n]||{};return this.iterator(t,i)},fomateSubPath:function(t){return t.replace(/\.([^\.]+)/g,'["$1"]')},deleteSub:function(t,e){var n=new Function("subs","delete subs."+this.fomateSubPath(e)+";");n(t)},swapSub:function(t,e,n){var i=new Function("subs","subs."+this.fomateSubPath(e)+" = subs."+this.fomateSubPath(n)+";");i(t)}},a=n.prototype;a.change=function(t){var e=this.$depSub,n=r.iterator(t.path.split("."),e);$.util.each(n.$||[],function(e,n){n(t,e)})},a.watch=function(t,e,n){var i=this.parser,a=this.$depSub;$.util.each(t,function(t,o){var s=r.iterator(o.split("."),a);s.$=s.$||[],s.$.push(function(){i.watchBack(n,e,arguments)})})},a.updateIndex=function(t,e,n,i){var r=e.method;switch(r){case"pop":this.updateIndexForPop.apply(this,arguments);break;case"push":this.updateIndexForPush.apply(this,arguments);break;case"shift":this.updateIndexForShift.apply(this,arguments);break;case"unshift":this.updateIndexForUnshift.apply(this,arguments);break;case"splice":this.updateIndexForSplice.apply(this,arguments)}},a.updateIndexForPop=function(t,e,n,i){var a=this.$depSub,o=e.oldLen;i&&r.deleteSub(a,t+"."+(o-1))},a.updateIndexForPush=function(t,e,n,i){},a.updateIndexForShift=function(t,e,n,i){for(var a=e.oldLen,o=this.$depSub,s=1;s<a;s++){var u=s-1;oPath=t+"."+s,nPath=t+"."+u,oIndexPath=oPath+".*",nIndexPath=nPath+".*",i&&r.swapSub(o,nPath,oPath),n({path:nIndexPath,oldVal:s,newVal:u})}i&&r.deleteSub(o,t+"."+(a-1))},a.updateIndexForUnshift=function(t,e,n,i){for(var a=e.oldLen,o=e.newLen-e.oldLen,s=this.$depSub,u=a-1;u>-1;u--){var c=u+o;oPath=t+"."+u,nPath=t+"."+c,oIndexPath=oPath+".*",nIndexPath=nPath+".*",i&&r.swapSub(s,nPath,oPath),n({path:nIndexPath,oldVal:u,newVal:c})}if(i)for(var u=0;u<o;u++)r.deleteSub(s,t+"."+u)},a.updateIndexForSplice=function(t,e,n,i){var a=$.util.copyArray(e.args),o=a.shift(),s=a.shift(),u=e.oldLen,c=0,h=this.$depSub;if(1===e.args.length){if(!i)return;for(var l=o;l<u;l++)r.deleteSub(h,t+"."+l)}else{var f=o+s;c=a.length-s;for(var l=u-1;l>f-1;l--){var p=l+c;oPath=t+"."+l,nPath=t+"."+p,oIndexPath=oPath+".*",nIndexPath=nPath+".*",i&&r.swapSub(h,nPath,oPath),n({path:nIndexPath,oldVal:l,newVal:p})}if(!i)return;if(c<0)for(var l=u+c;l<u;l++)r.deleteSub(h,t+"."+l);else if(c>0)for(var l=o;l<f+1;l++)r.deleteSub(h,t+"."+l)}},t.exports=n}()},function(t,exports,e){!function(){function n(t,e){this.watcher=e,this.$subs={},this.observe(t)}var $=e(1);Array.prototype.xSort=function(t){for(var t=t||function(t,e){return t>e},e=0;e<this.length;e++)for(var n=e;n<this.length;n++)if(t(this[e],this[n])){var i=this[e];this[e]=this[n],this[n]=i}return this};var i=["pop","push","sort","shift","splice","unshift","reverse","xSort"],r={isNeed:function(t){return $.isArray(t)||$.util.isObject(t)}},a=n.prototype;a.trigger=function(t){this.watcher.change(t)},a.observe=function(t,e){return $.isArray(t)&&this.observeArray(t,e),$.util.each(t,function(n,i){var a=$.util.copyArray(e||[]);a.push(n),this.observeObject(t,a,i),r.isNeed(i)&&this.observe(i,a)},this),this},a.observeObject=function(t,e,n){var i=(e||[]).join("."),a=e[e.length-1],o=Object.getOwnPropertyDescriptor(t,a),s=o.get,u=o.set,c=this;Object.defineProperty(t,a,{get:function(){return s?s.call(t):n},set:function(a){var o=s?s.call(t):n;a!==o&&(r.isNeed(a)&&c.observe(a,e),u?u.call(t,a):n=a,c.trigger({path:i,oldVal:o,newVal:a}))}})},a.observeArray=function(t,e){var n=Array.prototype,r=Object.create(n),a=(e||[]).join(".");$.util.each(i,function(t,i){var o=this,s=n[i];$.util.defRec(r,i,function(){var t=$.util.copyArray(arguments),n=this.length,r=s.apply(this,arguments),u=this.length;return o.observe(this,e),o.trigger({path:a,method:i,args:t,oldLen:n,newLen:u,newArray:this}),r})},this),t.__proto__=r},t.exports=n}()},function(t,exports,e){var n;!function(){var i={},r={},a={openTag:"<%",closeTag:"%>",originalTag:"#",annotation:"/\\*((?!\\*/).)*\\*/",escape:!0},o={},s={getDom:function(t){return"undefined"!=typeof document&&document.getElementById?document.getElementById(t):e(3).getElement(t)},cache:{include:function(t,e){return e=e||this||{},{include:u.render(t,e)}},escape:function(t,e){return"object"==typeof e?e.include||"":"string"==typeof e&&a.escape&&t!==a.originalTag?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;"):e},error:function(t){c("template.error",t)}},setCache:function(t,e){this.cache[t]=e},getCacheKey:function(){var t=this.cache,e=[];for(var n in t)e.push(n);return e}},u={setter:function(t,e){return i[t]=this.syntax(e)},getter:function(t){var e;return i[t]?i[t]:(e=s.getDom(t))?(e=/^(textarea|input)$/i.test(e.nodeName)?e.value:e.innerHTML,this.setter(t,e)):(e=o.get?o.get(t):"")?this.setter(t,e):(c("template.error",{msg:"模板找不到输入内容为："+t}),this.syntax(t||""))},compile:function(t){var e=s.cache,n=this.getter(t);return function(a){var o=[];for(var u in e)"function"==typeof e[u]?!function(t,n){t[n]=function(){return e[n].apply(t,arguments)}}(a,u):a[u]=e[u];var c=t;for(var u in a)o.push("var "+u+'=$data["'+u+'"];'),c+=u;try{var h=r[c]||new Function("$data",o.join("")+n);return i[t]&&(r[c]=h),h(a)}catch(t){return s.cache.error(t),""}}},syntax:function(t,e){var n=a.openTag,i=a.closeTag,r=a.originalTag,u="tplArr.push(__s('"+t+"').__f()";return u=(o.syntax?o.syntax:function(t){return t})(u.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/[\r\t\n]/g,"").replace(new RegExp(a.annotation,"g"),"").replace(new RegExp(n+"[ ]*($data.)?("+s.getCacheKey().join("|")+")","g"),n+"=$1$2").replace(new RegExp(n+"=("+r+"?)(.*?)"+i,"g"),"').__f(),$data.escape('$1',$2),__s('").replace(new RegExp(n,"g"),"').__f());").replace(new RegExp(i,"g"),"tplArr.push(__s('").replace(/__s\('(((?!__f).)*)'\).__f\(\)/g,function(t,e){return"'"+e.replace(/'/g,"\\'")+"'"}),e),u="try{var tplArr=[];"+u+");return tplArr.join('');}catch(e){$data.error(e); return '';}"},render:function(t,e){if(e instanceof Array){for(var n="",i=0,r=e.length;i<r;i++)n+=this.compile(t)(e[i]);return n}return this.compile(t)(e)},helper:function(t,e){s.setCache(t,e)},config:function(t,e){a[t]=e},hooks:function(t,e){o[t]="function"==typeof e?e:new Function(String(e))}},c=function(t,e){if(document&&document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),n.params=e,document.dispatchEvent(n)}},h=function(t,e){return u.render(t,e).replace(/>\s+([^\s<\w]*)\s+</g,"><")};for(var l in u)!function(t){h[t]=function(){return u[t].apply(u,arguments)}}(l);n=function(){return h}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))}()}]);